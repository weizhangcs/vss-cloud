# docker-compose.dev.yml
# 注意：version 字段已废弃（Docker Compose v1.27+）
# version: '1.2.0'

services:
  db:
    ports:
      - "8543:5432" # 开发环境映射数据库端口到宿主机，方便调试

  web:
    build: .
    command: python manage.py runserver 0.0.0.0:8001
    volumes:
      - .:/app # [Dev] 挂载源码
      - ./shared_media:/app/shared_media
    ports:
      - "8001:8001"

  worker:
    build: .
    volumes:
      - .:/app # [Dev] 挂载源码
      - ./shared_media:/app/shared_media